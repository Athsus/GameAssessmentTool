{"version":3,"file":"contexts-n-37oNwj.js","sources":["../../../src/contexts/CartContext.tsx"],"sourcesContent":["import { createContext, useContext, useState, type ReactNode } from 'react';\r\n\r\nexport interface CartItem {\r\n  id: string;\r\n  code: string;\r\n  product: string;\r\n  description: string | null;\r\n  website: string;\r\n  image_url: string | null;\r\n}\r\n\r\ninterface CartContextType {\r\n  items: CartItem[];\r\n  addItem: (item: CartItem) => void;\r\n  removeItem: (id: string) => void;\r\n  clearCart: () => void;\r\n}\r\n\r\n// 提供默认值\r\nconst defaultContext: CartContextType = {\r\n  items: [],\r\n  addItem: () => {},\r\n  removeItem: () => {},\r\n  clearCart: () => {},\r\n};\r\n\r\n// 创建 context 时提供默认值\r\nexport const CartContext = createContext<CartContextType>(defaultContext);\r\n\r\nexport const CartProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [items, setItems] = useState<CartItem[]>([]);\r\n\r\n  const addItem = (item: CartItem) => {\r\n    setItems(prev => {\r\n      // 检查是否已存在\r\n      if (prev.some(i => i.id === item.id)) {\r\n        return prev;\r\n      }\r\n      return [...prev, item];\r\n    });\r\n  };\r\n\r\n  const removeItem = (id: string) => {\r\n    setItems(prev => prev.filter(item => item.id !== id));\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setItems([]);\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={{ items, addItem, removeItem, clearCart }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart must be used within a CartProvider');\r\n  }\r\n  return context;\r\n}; "],"names":["defaultContext","CartContext","createContext","CartProvider","children","items","setItems","useState","addItem","item","prev","i","removeItem","id","clearCart","jsx","useCart","context","useContext"],"mappings":"iDAmBA,MAAMA,EAAkC,CACtC,MAAO,CAAC,EACR,QAAS,IAAM,CAAC,EAChB,WAAY,IAAM,CAAC,EACnB,UAAW,IAAM,CAAA,CACnB,EAGaC,EAAcC,gBAA+BF,CAAc,EAE3DG,EAAkD,CAAC,CAAE,SAAAC,KAAe,CAC/E,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EAE3CC,EAAWC,GAAmB,CAClCH,EAAiBI,GAEXA,EAAK,KAAKC,GAAKA,EAAE,KAAOF,EAAK,EAAE,EAC1BC,EAEF,CAAC,GAAGA,EAAMD,CAAI,CACtB,CACH,EAEMG,EAAcC,GAAe,CACjCP,KAAiBI,EAAK,UAAeD,EAAK,KAAOI,CAAE,CAAC,CACtD,EAEMC,EAAY,IAAM,CACtBR,EAAS,CAAA,CAAE,CACb,EAGE,OAAAS,MAACd,EAAY,SAAZ,CAAqB,MAAO,CAAE,MAAAI,EAAO,QAAAG,EAAS,WAAAI,EAAY,UAAAE,CAAU,EAClE,SAAAV,CACH,CAAA,CAEJ,EAEaY,EAAU,IAAM,CACrB,MAAAC,EAAUC,aAAWjB,CAAW,EACtC,GAAI,CAACgB,EACG,MAAA,IAAI,MAAM,4CAA4C,EAEvD,OAAAA,CACT"}